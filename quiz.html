<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz do Trader Atom: Seu Perfil para o Mercado Financeiro!</title>
    <meta name="description" content="Descubra se você tem o perfil para operar com o capital da Atom. Faça nosso quiz rápido e receba uma análise personalizada.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* --- NOVAS CORES (Força, Confiabilidade, Segurança, Dinheiro) --- */
            --primary-color: #0A2342; /* Azul Marinho Profundo / Quase Preto - Força e Segurança */
            --secondary-color: #FFD700; /* Dourado Vivo - Dinheiro e Destaque */
            --accent-color: #C0C0C0; /* Prata - Confiabilidade e Premium */
            --selection-green: #008000; /* Novo Verde para seleção de opção - Transmite Confiança e Crescimento */
            --error-red: #FF0000; /* Vermelho para mensagens de erro */

            /* --- Outras Cores --- */
            --text-color: #333;
            --light-gray: #f4f4f4;
            --dark-gray: #555;
            --border-color: #ddd;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-gray);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            color: var(--primary-color);
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            margin-bottom: 10px;
        }

        header p {
            color: var(--dark-gray);
            font-size: 1.1em;
        }

        .quiz-section {
            display: none; /* Hidden by default */
        }

        .quiz-section.active {
            display: block; /* Show active section */
        }

        .question-progress {
            font-size: 0.9em;
            color: var(--dark-gray);
            text-align: center;
            margin-bottom: 20px;
        }

        .question-card {
            background-color: var(--primary-color); /* Fundo da pergunta */
            color: #fff; /* Cor do texto da pergunta */
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-button {
            background-color: #f0f0f0; /* Fundo das opções */
            color: var(--primary-color); /* Texto das opções */
            border: 2px solid var(--accent-color);
            padding: 15px 20px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-weight: 500;
        }

        .option-button:hover {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .option-button.selected {
            background-color: var(--selection-green);
            color: #fff;
            border-color: var(--selection-green);
            box-shadow: 0 2px 8px rgba(0, 128, 0, 0.3);
        }

        .option-button:active {
            transform: translateY(0);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px; /* Espaço entre os botões */
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s ease;
            flex-grow: 1; /* Para que os botões ocupem o espaço disponível */
            max-width: 48%; /* Para garantir que não cresçam demais */
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: #fff;
        }

        .btn-primary:hover {
            background-color: #071a30;
        }

        .btn-secondary {
            background-color: var(--accent-color);
            color: var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: #a0a0a0;
        }

        /* Lead Capture Section */
        .lead-capture-section {
            display: none;
            text-align: center;
            padding: 30px 20px;
            border-top: 2px solid var(--border-color);
            margin-top: 30px;
        }

        .lead-capture-section h2 {
            color: var(--primary-color);
            font-family: 'Poppins', sans-serif;
            margin-bottom: 20px;
        }

        .lead-capture-section .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .lead-capture-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .lead-capture-section input[type="text"],
        .lead-capture-section input[type="email"],
        .lead-capture-section input[type="tel"] {
            width: calc(100% - 24px); /* Adjust for padding */
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1em;
        }
        
        .lead-capture-section input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(10, 35, 66, 0.2);
        }

        .error-message {
            color: var(--error-red);
            font-size: 0.9em;
            margin-top: 5px;
            display: none; /* Hidden by default */
        }

        /* Results Section */
        .results-section {
            display: none;
            text-align: center;
            padding: 30px 20px;
            border-top: 2px solid var(--border-color);
            margin-top: 30px;
        }

        .results-section h2 {
            color: var(--primary-color);
            font-family: 'Poppins', sans-serif;
            margin-bottom: 20px;
        }

        .results-section p {
            color: var(--dark-gray);
            font-size: 1.1em;
            margin-bottom: 25px;
            text-align: justify;
        }

        .results-section .quote {
            background-color: #f0f8ff; /* Light blue background for quote */
            border-left: 5px solid var(--secondary-color);
            padding: 15px 20px;
            margin: 30px auto;
            max-width: 600px;
            font-style: italic;
            color: var(--primary-color);
            position: relative;
            text-align: left;
        }

        .results-section .quote::before {
            content: '“';
            font-family: Georgia, serif;
            font-size: 3em;
            color: var(--secondary-color);
            position: absolute;
            left: 10px;
            top: 5px;
            opacity: 0.6;
        }

        .results-section .quote::after {
            content: '”';
            font-family: Georgia, serif;
            font-size: 3em;
            color: var(--secondary-color);
            position: absolute;
            right: 10px;
            bottom: -15px;
            opacity: 0.6;
        }

        .results-section .quote footer {
            margin-top: 10px;
            font-size: 0.9em;
            text-align: right;
            color: var(--dark-gray);
        }

        .final-cta {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            padding: 15px 30px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.2em;
            margin-top: 30px;
            display: inline-block;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .final-cta:hover {
            background-color: #e6c200;
            transform: translateY(-3px);
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            .btn {
                padding: 10px 15px;
                font-size: 0.9em;
            }
            .navigation-buttons {
                flex-direction: column;
            }
            .btn, .btn-secondary {
                max-width: 100%;
            }
            .question-card {
                font-size: 1em;
                padding: 20px;
            }
            .option-button {
                padding: 12px 15px;
                font-size: 0.9em;
            }
            .results-section p {
                font-size: 1em;
            }
            .final-cta {
                font-size: 1em;
                padding: 12px 20px;
            }
        }
    </style>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    </head>
<body>
    <div class="container">
        <header>
            <h1>Descubra o Seu Perfil para a Universidade Atom!</h1>
            <p>Responda algumas perguntas rápidas e receba uma análise personalizada sobre o seu potencial no mercado financeiro.</p>
        </header>

        <div id="quiz-section-1" class="quiz-section active">
            <p class="question-progress">Pergunta 1 de 5</p>
            <div class="question-card">Qual a sua principal motivação para buscar novas fontes de renda?</div>
            <div class="options-container">
                <button class="option-button" data-value="Liberdade Financeira">Ter mais liberdade financeira para viver como sempre sonhei.</button>
                <button class="option-button" data-value="Sair da Dívida">Sair das dívidas e ter mais tranquilidade.</button>
                <button class="option-button" data-value="Aposentadoria Precoce">Aposentar-me mais cedo e aproveitar a vida sem preocupações financeiras.</button>
                <button class="option-button" data-value="Investir em Sonhos">Juntar dinheiro para investir em um grande sonho (casa, carro, viagem).</button>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-primary" id="next-q1">Próxima</button>
            </div>
        </div>

        <div id="quiz-section-2" class="quiz-section">
            <p class="question-progress">Pergunta 2 de 5</p>
            <div class="question-card">Qual o seu maior receio ao pensar em investir seu próprio capital?</div>
            <div class="options-container">
                <button class="option-button" data-value="Perder Dinheiro">Perder o dinheiro que investi.</button>
                <button class="option-button" data-value="Falta de Conhecimento">Não ter conhecimento suficiente para tomar as decisões certas.</button>
                <button class="option-button" data-value="Mercado Volátil">O mercado ser muito volátil e imprevisível.</button>
                <button class="option-button" data-value="Fraudes">Cair em golpes ou fraudes financeiras.</button>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="prev-q2">Anterior</button>
                <button class="btn btn-primary" id="next-q2">Próxima</button>
            </div>
        </div>

        <div id="quiz-section-3" class="quiz-section">
            <p class="question-progress">Pergunta 3 de 5</p>
            <div class="question-card">Quanto tempo você estaria disposto a dedicar por dia para aprender e operar no mercado?</div>
            <div class="options-container">
                <button class="option-button" data-value="Menos de 1h">Menos de 1 hora.</button>
                <button class="option-button" data-value="1-2h">De 1 a 2 horas.</button>
                <button class="option-button" data-value="2-4h">De 2 a 4 horas.</button>
                <button class="option-button" data-value="Mais de 4h">Mais de 4 horas.</button>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="prev-q3">Anterior</button>
                <button class="btn btn-primary" id="next-q3">Próxima</button>
            </div>
        </div>

        <div id="quiz-section-4" class="quiz-section">
            <p class="question-progress">Pergunta 4 de 5</p>
            <div class="question-card">Qual tipo de operação no mercado financeiro mais te atrai?</div>
            <div class="options-container">
                <button class="option-button" data-value="Day Trade">Operações rápidas de compra e venda no mesmo dia (Day Trade).</button>
                <button class="option-button" data-value="Swing Trade">Operações de médio prazo, segurando por alguns dias/semanas (Swing Trade).</button>
                <button class="option-button" data-value="Long-Term Investing">Investimento de longo prazo em ações ou fundos.</button>
                <button class="option-button" data-value="Renda Fixa">Investimentos mais seguros e previsíveis (renda fixa).</button>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="prev-q4">Anterior</button>
                <button class="btn btn-primary" id="next-q4">Próxima</button>
            </div>
        </div>

        <div id="quiz-section-5" class="quiz-section">
            <p class="question-progress">Pergunta 5 de 5</p>
            <div class="question-card">Você já tem alguma experiência ou conhecimento sobre o mercado financeiro?</div>
            <div class="options-container">
                <button class="option-button" data-value="Nenhuma">Nenhuma experiência.</button>
                <button class="option-button" data-value="Básico">Conhecimento básico (li alguns artigos/livros, vi alguns vídeos).</button>
                <button class="option-button" data-value="Intermediário">Conhecimento intermediário (já fiz algum curso, operei em simulador).</button>
                <button class="option-button" data-value="Avançado">Conhecimento avançado (já opero na prática, tenho mentores).</button>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="prev-q5">Anterior</button>
                <button class="btn btn-primary" id="submit-quiz">Ver Meu Resultado</button>
            </div>
        </div>

        <div id="lead-capture-section" class="lead-capture-section">
            <h2>Quase lá! Para ver seu perfil completo, preencha seus dados:</h2>
            <div class="input-group">
                <label for="lead-name">Nome Completo:</label>
                <input type="text" id="lead-name" placeholder="Seu nome completo">
                <div class="error-message" id="name-error">Por favor, preencha seu nome.</div>
            </div>
            <div class="input-group">
                <label for="lead-email">Seu Melhor E-mail:</label>
                <input type="email" id="lead-email" placeholder="seu.email@exemplo.com">
                <div class="error-message" id="email-error">Por favor, insira um e-mail válido.</div>
            </div>
            <div class="input-group">
                <label for="lead-whatsapp">Seu WhatsApp (Opcional):</label>
                <input type="tel" id="lead-whatsapp" placeholder="(99) 99999-9999" maxlength="15">
            </div>
            <button class="btn btn-primary" id="get-results">Ver Meu Resultado</button>
        </div>

        <div id="results-section" class="results-section">
            <h2 id="results-title"></h2>
            <p id="results-text"></p>
            <div class="quote">
                <span id="quote-text"></span>
                <footer>- <span id="quote-author"></span></footer>
            </div>
            <a href="#" class="final-cta" id="final-cta-button">Quero Dar o Próximo Passo!</a>
        </div>
    </div>

    <script>
        // --- CONFIGURAÇÕES DO GOOGLE FORMS ---
        // ATENÇÃO: Verifique sempre se esses IDs e a URL estão atualizados com seu formulário publicado.
        const GOOGLE_FORM_ACTION_URL = 'https://docs.google.com/forms/d/e/1FAIpQLScU0c2h4B3e1c6n6C0p5M-T7p4S3q2Y8o8B4g9M0J9t3N0G0/formResponse'; // URL de ação do formulário
        const NAME_ENTRY_ID = 'entry.2117502428'; // ID para "Nome Completo"
        const EMAIL_ENTRY_ID = 'entry.1018311110'; // ID para "Seu Melhor E-mail"
        const WHATSAPP_ENTRY_ID = 'entry.1221710242'; // ID para "Seu WhatsApp"
        const ANSWERS_ENTRY_ID = 'entry.393450934'; // ID para "Respostas do Quiz"
        const PROFILE_ENTRY_ID = 'entry.1704609806'; // ID para "Perfil do Usuário"
        // --- FIM DAS CONFIGURAÇÕES DO GOOGLE FORMS ---

        const quizSections = [
            document.getElementById('quiz-section-1'),
            document.getElementById('quiz-section-2'),
            document.getElementById('quiz-section-3'),
            document.getElementById('quiz-section-4'),
            document.getElementById('quiz-section-5')
        ];
        const leadCaptureSection = document.getElementById('lead-capture-section');
        const resultsSection = document.getElementById('results-section');

        const leadNameInput = document.getElementById('lead-name');
        const leadEmailInput = document.getElementById('lead-email');
        const leadWhatsappInput = document.getElementById('lead-whatsapp');
        const nameError = document.getElementById('name-error');
        const emailError = document.getElementById('email-error');
        const getResultsButton = document.getElementById('get-results');

        const resultsTitle = document.getElementById('results-title');
        const resultsText = document.getElementById('results-text');
        const quoteText = document.getElementById('quote-text');
        const quoteAuthor = document.getElementById('quote-author');
        const finalCtaButton = document.getElementById('final-cta-button');

        let currentQuestionIndex = 0;
        const userAnswers = [];
        let userName = '';
        let userEmail = '';
        let userWhatsapp = '';
        let userProfileType = ''; // Para armazenar o tipo de perfil do usuário

        function showSection(index) {
            quizSections.forEach((section, i) => {
                section.classList.remove('active');
                if (i === index) {
                    section.classList.add('active');
                }
            });
            leadCaptureSection.style.display = 'none';
            resultsSection.style.display = 'none';
        }

        function showLeadCapture() {
            quizSections.forEach(section => section.classList.remove('active'));
            leadCaptureSection.style.display = 'block';
            resultsSection.style.display = 'none';
        }

        function showResults() {
            quizSections.forEach(section => section.classList.remove('active'));
            leadCaptureSection.style.display = 'none';
            resultsSection.style.display = 'block';
            // Scroll to top of results section
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function isValidEmail(email) {
            const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }

        // Event Listeners for Quiz Navigation
        quizSections.forEach((section, index) => {
            const options = section.querySelectorAll('.option-button');
            options.forEach(button => {
                button.addEventListener('click', () => {
                    options.forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    userAnswers[index] = button.dataset.value;
                });
            });

            const nextButton = section.querySelector(`#next-q${index + 1}, #submit-quiz`);
            if (nextButton) {
                nextButton.addEventListener('click', () => {
                    if (userAnswers[index]) { // Check if an option is selected
                        if (index < quizSections.length - 1) {
                            currentQuestionIndex++;
                            showSection(currentQuestionIndex);
                        } else {
                            // Last question, show lead capture
                            showLeadCapture();
                        }
                    } else {
                        alert("Por favor, selecione uma opção antes de continuar.");
                    }
                });
            }

            const prevButton = section.querySelector(`#prev-q${index + 1}`);
            if (prevButton) {
                prevButton.addEventListener('click', () => {
                    currentQuestionIndex--;
                    showSection(currentQuestionIndex);
                });
            }
        });

        // Event Listener for Get Results Button (Lead Capture)
        getResultsButton.addEventListener('click', async () => {
            userName = leadNameInput.value.trim();
            userEmail = leadEmailInput.value.trim();
            userWhatsapp = leadWhatsappInput.value.trim();

            let hasError = false;

            if (!userName) {
                nameError.style.display = 'block';
                hasError = true;
            } else {
                nameError.style.display = 'none';
            }

            if (!userEmail || !isValidEmail(userEmail)) {
                emailError.style.display = 'block';
                hasError = true;
            } else {
                emailError.style.display = 'none';
            }

            if (hasError) {
                return;
            }

            // Determine user profile type based on answers
            userProfileType = determineUserProfile(userAnswers);

            // Enviar dados para o Google Forms
            await sendDataToGoogleForms();

            // Display results
            displayResults(userProfileType, userAnswers);
            showResults();
        });

        // Whatsapp input formatting
        leadWhatsappInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove all non-digit characters
            let formattedValue = '';

            if (value.length > 0) {
                formattedValue += '(' + value.substring(0, 2);
                if (value.length > 2) {
                    formattedValue += ') ';
                }
                if (value.length > 7) { // For 9 digit numbers (mobile)
                    formattedValue += value.substring(2, 7) + '-';
                    formattedValue += value.substring(7, 11);
                } else if (value.length > 6) { // For 8 digit numbers
                    formattedValue += value.substring(2, 6) + '-';
                    formattedValue += value.substring(6, 10);
                } else {
                    formattedValue += value.substring(2, 6);
                }
            }
            e.target.value = formattedValue;
        });

        leadWhatsappInput.addEventListener('keydown', function(e) {
            // Allow backspace, tab, escape, enter, arrows, delete
            if ([8, 9, 27, 13, 37, 39, 46].indexOf(e.keyCode) !== -1 ||
                // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) || 
                (e.keyCode === 67 && (e.ctrlKey === true || e.metaKey === true)) || 
                (e.keyCode === 86 && (e.ctrlKey === true || e.metaKey === true)) || 
                (e.keyCode === 88 && (e.ctrlKey === true || e.metaKey === true)) || 
                // Allow numbers
                (e.keyCode >= 48 && e.keyCode <= 57) ||
                (e.keyCode >= 96 && e.keyCode <= 105)) {
                return;
            }
            // Prevent other keys
            e.preventDefault();
        });

        leadWhatsappInput.addEventListener('paste', function(e) {
            const pastedData = e.clipboardData.getData('text');
            const cleanedData = pastedData.replace(/\D/g, ''); // Remove non-digits
            e.target.value = cleanedData.substring(0, 11); // Max 11 digits for formatting
            e.target.dispatchEvent(new Event('input')); // Trigger input event to format
            e.preventDefault(); // Prevent default paste behavior
        });


        // Função para determinar o perfil do usuário
        function determineUserProfile(answers) {
            // Lógica mais elaborada para determinar o perfil
            // Exemplo simples baseado nas respostas:
            const motivations = {
                "Liberdade Financeira": 5, "Sair da Dívida": 4, "Aposentadoria Precoce": 3, "Investir em Sonhos": 2
            };
            const concerns = {
                "Perder Dinheiro": 5, "Falta de Conhecimento": 3, "Mercado Volátil": 2, "Fraudes": 1
            };
            const timeDedicated = {
                "Menos de 1h": 1, "1-2h": 2, "2-4h": 4, "Mais de 4h": 5
            };
            const attractions = {
                "Day Trade": 5, "Swing Trade": 4, "Long-Term Investing": 2, "Renda Fixa": 1
            };
            const experiences = {
                "Nenhuma": 1, "Básico": 2, "Intermediário": 3, "Avançado": 4
            };

            let score = 0;
            score += motivations[answers[0]] || 0;
            score += concerns[answers[1]] || 0;
            score += timeDedicated[answers[2]] || 0;
            score += attractions[answers[3]] || 0;
            score += experiences[answers[4]] || 0;

            if (score >= 18) return "Arrojado";
            if (score >= 12) return "Cauteloso";
            return "Conservador";
        }

        async function sendDataToGoogleForms() {
            // NOVO MÉTODO DE ENVIO USANDO FETCH
            const formData = new FormData();
            formData.append(NAME_ENTRY_ID, userName);
            formData.append(EMAIL_ENTRY_ID, userEmail);
            formData.append(WHATSAPP_ENTRY_ID, userWhatsapp);
            if (userAnswers.length > 0) {
                // Formate as respostas do quiz em uma string legível
                formData.append(ANSWERS_ENTRY_ID, userAnswers.map((ans, i) => `Q${i+1}: ${ans}`).join(' | '));
            }
            formData.append(PROFILE_ENTRY_ID, userProfileType);

            try {
                const response = await fetch(GOOGLE_FORM_ACTION_URL, {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors' // Essencial para evitar problemas de CORS com Google Forms
                });

                console.log('Dados enviados (fetch com no-cors). Verifique o Google Forms.');

            } catch (error) {
                console.error('Erro ao enviar dados para o Google Forms:', error);
                alert('Ocorreu um erro ao enviar seus dados. Por favor, tente novamente.');
            }
        }


        // Função para exibir os resultados na tela
        function displayResults(profileType, answers) {
            let titleText = '';
            let resultParagraph1 = '';
            let resultParagraph2 = '';
            let quoteAuthorText = '';
            let quoteTextContent = '';

            const mainMotivation = answers[0];
            const mainConcern = answers[1];
            const timeDedicated = answers[2];
            const mainAttraction = answers[3];
            const experience = answers[4];

            switch (profileType) {
                case "Arrojado":
                    titleText = "Parabéns! Seu Perfil é Arrojado para a Universidade Atom!";
                    resultParagraph1 = `Com base nas suas respostas, percebemos que você possui grande ambição em ${mainMotivation.toLowerCase()} e não teme ${mainConcern.toLowerCase()}. Sua disposição em dedicar ${timeDedicated.toLowerCase()} e seu interesse em ${mainAttraction.toLowerCase()} demonstram um grande potencial.`;
                    resultParagraph2 = `Seu perfil indica que você busca resultados significativos e está disposto a aprender e se dedicar para alcançá-los. A estrutura completa de aprendizado da Universidade Atom é ideal para quem, como você, está pronto para dar um grande salto e buscar a liberdade financeira através do mercado.`;
                    quoteTextContent = "O mercado financeiro é para os corajosos que buscam ir além. Não tenha medo de arriscar, tenha medo de não tentar!";
                    quoteAuthorText = "Lucas A. Trader Atom";
                    break;
                case "Conservador":
                    titleText = "Parabéns! Seu Perfil é Conservador para a Universidade Atom!";
                    resultParagraph1 = `Com base nas suas respostas, percebemos que você busca ${mainMotivation.toLowerCase()} de forma mais segura e se preocupa com ${mainConcern.toLowerCase()}. Seu tempo de dedicação de ${timeDedicated.toLowerCase()} e seu interesse em ${mainAttraction.toLowerCase()} indicam uma abordagem mais cautelosa.`;
                    resultParagraph2 = `Seu perfil demonstra prudência e aversão a riscos desnecessários. A estrutura completa de aprendizado da Universidade Atom oferece um caminho seguro para quem deseja entrar no mercado, com foco em gestão de risco e estratégias que minimizam perdas, ideal para quem, como você, busca resultados sólidos com segurança.`;
                    quoteTextContent = "Comece pequeno, mas comece. A jornada de mil milhas começa com um único passo. A segurança está no conhecimento, não na inércia.";
                    quoteAuthorText = "Lucas A. Trader Atom";
                    break;
                case "Cauteloso":
                default: // Default para Cauteloso
                    titleText = "Parabéns! Seu Perfil é Cauteloso para a Universidade Atom!";
                    resultParagraph1 = `Com base nas suas respostas, percebemos que você possui grande interesse em ${mainMotivation.toLowerCase()} e busca soluções sobre ${mainConcern.toLowerCase()}. Seu tempo de dedicação de ${timeDedicated.toLowerCase()} e seu interesse em ${mainAttraction.toLowerCase()} mostram um equilíbrio.`;
                    resultParagraph2 = `Seu perfil demonstra interesse e abertura para o mercado financeiro. Com a estrutura completa de aprendizado da Universidade Atom, você pode desenvolver as habilidades necessárias para operar com confiança e ser cauteloso, sem arriscar seu próprio capital. Milhares de iniciantes já trilharam esse caminho com sucesso!`;
                    quoteTextContent = "Eu também tinha medo de perder dinheiro, mas a Atom me deu o conhecimento e o capital para começar. Hoje, opero com confiança!";
                    quoteAuthorText = "Lucas A. Trader Atom";
                    break;
            }

            resultsTitle.textContent = titleText;
            resultsText.innerHTML = `${resultParagraph1}<br><br>${resultParagraph2}`;
            quoteText.textContent = quoteTextContent;
            quoteAuthor.textContent = quoteAuthorText;
            
            // Disparar evento de Pixel para "Conclusão do Quiz"
            if (typeof fbq === 'function') {
                fbq('trackCustom', 'QuizCompleted', { 
                    quiz_name: 'Trader Atom Profile',
                    profile_type: profileType,
                    motivation: mainMotivation,
                    concern: mainConcern,
                    time_dedicated: timeDedicated,
                    main_attraction: mainAttraction,
                    experience: experience
                });
            }
        }

        // NEW: Add event listener for the final CTA button
        finalCtaButton.addEventListener('click', function() {
            if (typeof fbq === 'function') {
                fbq('trackCustom', 'BridgePageClicked', { 
                    quiz_name: 'Trader Atom Profile',
                    profile_type: resultsTitle.textContent.replace('Parabéns! Seu Perfil é ', '').replace(' para a Universidade Atom!', ''), // Extract profile type
                    lead_name: userName,
                    lead_email: userEmail,
                    lead_whatsapp: userWhatsapp
                });
            }
        });

    </script>
</body>
</html>